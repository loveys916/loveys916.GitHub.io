(function(e){function t(t){for(var i,r,c=t[0],a=t[1],l=t[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,c=1;c<n.length;c++){var a=n[c];0!==s[a]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},s={app:0},o=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),s=(n("b0c0"),{class:"main-container"}),o=Object(i["e"])("h1",null,"视频源可播放性及性能测试",-1),r={class:"vdbox"},c={key:0,class:"vdup"},a=Object(i["e"])("div",{id:"videobox"},null,-1),l={key:1,class:"allerror vdup"},u={class:"message"},d=Object(i["e"])("div",{class:"header"},"Status",-1),p={class:"msgbox"},h={class:"message"},b=Object(i["e"])("div",{class:"header"},"Error",-1),f={class:"msgbox"},y={class:"button-box"},m={key:0,class:"addPlayBox"},v={class:"container"},g={class:"body"},j={class:"footer"};function O(e,t,n,O,w,x){return Object(i["f"])(),Object(i["c"])("div",s,[o,Object(i["e"])("div",r,[w.error?(Object(i["f"])(),Object(i["c"])("div",l,[Object(i["e"])("p",null,Object(i["h"])(w.error),1)])):(Object(i["f"])(),Object(i["c"])("div",c,[a]))]),Object(i["e"])("div",u,[d,Object(i["e"])("div",p,[(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["g"])(w.msgList,(function(e){return Object(i["f"])(),Object(i["c"])("div",{class:"msgitem",key:e,innerHTML:e},null,8,["innerHTML"])})),128))])]),Object(i["e"])("div",h,[b,Object(i["e"])("div",f,[(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["g"])(w.errList,(function(e){return Object(i["f"])(),Object(i["c"])("div",{class:"msgitem",key:e,innerHTML:e},null,8,["innerHTML"])})),128))])]),Object(i["e"])("div",y,[(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["g"])(w.buttonList,(function(e,t){return Object(i["f"])(),Object(i["c"])("div",{class:"btn",key:t,onClick:function(t){return x.loadItem(e)}},Object(i["h"])(e.name),9,["onClick"])})),128)),Object(i["e"])("div",{class:"btn",onClick:t[1]||(t[1]=function(){return x.addPlay.apply(x,arguments)})},"+")]),w.addPlayBox?(Object(i["f"])(),Object(i["c"])("div",m,[Object(i["e"])("div",v,[Object(i["e"])("div",g,[Object(i["j"])(Object(i["e"])("input",{type:"text",placeholder:"标题","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.videoTitle=t})},null,512),[[i["i"],e.videoTitle]]),Object(i["j"])(Object(i["e"])("input",{type:"text",placeholder:"播放地址","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.videoUrl=t})},null,512),[[i["i"],e.videoUrl]])]),Object(i["e"])("div",j,[Object(i["e"])("button",{onClick:t[4]||(t[4]=function(){return x.reject.apply(x,arguments)})},"取消"),Object(i["e"])("button",{onClick:t[5]||(t[5]=function(){return x.enter.apply(x,arguments)}),class:"enter"},"确定")])])])):Object(i["d"])("",!0)])}n("99af"),n("c975"),n("4d63"),n("ac1f"),n("25f0"),n("5319");var w=n("f0e2");n("fda2");Date.prototype.pattern=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[this.getDay()+""])),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};var x={name:"App",data:function(){return{buttonList:window.btnList,error:!1,videoOptions:{bigPlayButton:!0,textTrackDisplay:!1,sources:[],posterImage:!0,errorDisplay:!1,autoplay:!0,controlBar:!1,ControlBar:{customControlSpacer:!0,pictureInPictureToggle:!1,durationDisplay:!0,remainingTimeDisplay:!0}},nowUrl:null,hls:null,msgList:[],errList:[],nowTime:null,addPlayBox:!1}},methods:{loadItem:function(e){this.setPlayerSource(e)},setPlayerSource:function(e){var t=this;this.errList=[],this.msgList=[],this.nowTime=(new Date).getTime(),this.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 开始获取资源：").concat(e.url)),this.hls&&(this.error=!1,this.hls.pause(),this.hls.dispose()),this.$nextTick((function(){document.getElementById("videobox").innerHTML="";var n='<video id="myVideo" class="video-js vjs-default-skin vjs-big-play-centered vjs-16-9" controls preload="auto" webkit-playsinline="true" playsinline="true" allowsInlineMediaPlayback=YES  webview.allowsInlineMediaPlayback=YES  width=\'100%\' ref=\'videoRef\' x5-video-player-fullscreen="true">\n            <p class="vjs-no-js">不支持播放</p>\n        </video>';document.getElementById("videobox").innerHTML=n,t.videoOptions.sources=[],t.nowUrl=e.url,t.nowUrl.indexOf(".m3u8")>-1?t.videoOptions.sources.push({src:t.nowUrl,type:"application/x-mpegURL"}):t.videoOptions.sources.push({src:t.nowUrl,type:"video/mp4"});var i=t;t.hls=Object(w["a"])("myVideo",t.videoOptions,(function(){var e=this;this.on("stalled",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 播放遇到网络卡顿"))})),this.on("play",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 开始播放"))})),this.on("waiting",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 播放卡顿：正在加载数据"))})),this.on("playing",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 开始播放"))})),this.on("pause",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 暂停播放"))})),this.on("ended",(function(){i.msgList.push("".concat((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss")," | 播放结束"))})),this.on("loadstart",(function(){i.msgList.push("耗时：".concat((new Date).getTime()-i.nowTime,"ms | 开始加载视频"))})),this.on("loadedmetadata",(function(){i.msgList.push("耗时：".concat((new Date).getTime()-i.nowTime,"ms | 视频源数据加载完成"))})),this.on("loadeddata",(function(){i.msgList.push("耗时：".concat((new Date).getTime()-i.nowTime,"ms | 开始渲染播放画面"))})),this.on("error",(function(){i.error=e.error_.message;var t=(new Date).getTime()-i.nowTime;switch(e.error_.code){case 1:i.errList.push("耗时：".concat(t,"ms | 取回过程被中止"));break;case 2:i.errList.push("耗时：".concat(t,"ms | 下载时发生错误"));break;case 3:i.errList.push("耗时：".concat(t,"ms | 解码时发生错误"));break;case 4:i.errList.push("耗时：".concat(t,"ms | 资源无法获取"));break}i.msgList.push("耗时：".concat(t,"ms | 资源获取失败(可能原因：资源不存在，资源未设置允许跨域访问等)"))}))}))}))},addPlay:function(){this.addPlayBox=!0},reject:function(){this.addPlayBox=!1,this.videoTitle="",this.videoUrl=""},enter:function(){this.videoUrl&&this.videoUrl.indexOf("http")>-1&&this.videoUrl.indexOf("m3u8")>-1?(this.buttonList.push({name:this.videoTitle||"新添加",url:this.videoUrl}),this.addPlayBox=!1,this.videoTitle="",this.videoUrl=""):alert("输入错误，请重新输入")}}};n("64be");x.render=O;var E=x;Object(i["b"])(E).mount("#app")},"64be":function(e,t,n){"use strict";n("c894")},c894:function(e,t,n){}});